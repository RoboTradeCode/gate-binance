# Binance GateWay

Выполняемые действия при запуске:
1. Получение из конфига API ключей Binance. Они нужны, чтобы торговать - то есть выставлять и отменять ордера, а также получать информацию по балансу пользователя.
2. Подключение к каналам Aeron. Всего четыре канала: 
   1. Канал отправки данных стакана
   2. Канал отправки данных баланса пользователя
   3. Канал отправки ошибок
   4. Канал получения команд на управление ордерами от ядра (создание и отмена)
3. Отправка текущего баланса по криптовалютам в ядро. Отправляются только балансы больше нуля. 
4. Подключение веб-сокетов Binance, для получения данных по стакану и данных о балансе пользователя. Это позволяет не нагружать Binance API постоянными запросами.
5. Запуск **главного цикла**.

Шаги **главного цикла**:
1. Получение непрочитанных сообщений об ордерах из Aeron и их обработка, если они имеются. Gateway формирует ордер, отправляет его в Binance API, и обрабатывает ответ. Если Binance сообщает о неправильном ордере, отправляет сообщение ядру через канал Aeron.  
2. Обработка данных, которые получают веб-сокеты. Данные по стакану и изменениям баланса пользователя отправляются ядру через Aeron. 
3. Происходит проверка времени работы веб сокетов. Если прошло половина времени их работы, происходит переподключение. Если этого не сделать, то поток данных прервется через некоторое время.
